<!--
--- UCSF Chimera Copyright ---
Copyright (c) 2010-2014 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  This notice must be embedded in or
attached to all copies, including partial copies, of the
software or any revisions or derivations thereof.
--- UCSF Chimera Copyright ---
-->

<html>
<head>
<TITLE>Small-Angle X-Ray Profile</TITLE>
</head>
<body>
<h3>Small-Angle X-Ray Profile 
<img src="saxsicon.png" alt="Small-Angle X-Ray Profile icon"></h3>

<table cellspacing="0" cellpadding="0"
align="right" style="margin:8px 8px 8px 8px">
<tr><td><img src="2mefplot.png"></td></tr>
<tr><td align="center">
q = (4&pi;sin&theta;) / &lambda;
</td></tr><tr><td align="center">
2&theta; is the scattering angle, &lambda; the incident wavelength
</td></tr>
</table>
<p>
<b>Small-Angle X-Ray Profile</b> calculates a theoretical
small-angle X-ray scattering (SAXS) profile from a set of atoms.
The result can be displayed along with an experimental profile
provided by the user.  Calculations are performed with the program
<a href="https://modbase.compbio.ucsf.edu/foxs/about.html" 
target="_blank"><b>FoXS</b></a>,
<blockquote>
<a href="https://nar.oxfordjournals.org/content/38/suppl_2/W540.long"
target="_blank">
FoXS: a web server for rapid computation and fitting of SAXS profiles.</a>
Schneidman-Duhovny D, Hammel M, Sali A.
<i>Nucleic Acids Res.</i> 2010 Jul 1;38 Suppl:W540-4. 
</blockquote>
either <a href="#uselocal">locally</a> or via a web service hosted by the
<a href="https://www.cgl.ucsf.edu/Overview/index.html" target="_blank">UCSF
RBVI</a>.
See also: 
<a href="../../UsersGuide/fetch.html">fetching</a> PDB-biounit and PQS files,
<a href="../../UsersGuide/midas/sym.html"><b>sym</b></a>
</p><p/>
There are <a href="../../UsersGuide/extension.html">several ways to start</a>
<b>Small-Angle X-Ray Profile</b>, 
a tool in the <b>Higher-Order Structure</b> category.
</p><p>
The <b>Molecule</b> setting controls which atoms will be
included in the calculation:
  <ul>
  <li>any one of the open molecule models
  <li><b>all molecules</b> 
  - all molecule models combined
  <li><b>selected atoms</b>
  - the currently  <a href="../../UsersGuide/selection.html">selected</a> atoms
  </ul>
Water molecules are automatically ignored.
</p><p>
<a name="experimental">
Optionally, an <b>Experimental profile</b> can be read from a file.</a>
If an experimental profile is provided, the theoretical profile will be
scaled to fit the data.  The file should contain an initial comment line 
followed by three whitespace-preceded columns: q value, measured scattering,
and measured scattering error (see an
<a href="https://modbase.compbio.ucsf.edu/foxs/lyzexp.dat"
target="_blank">example file</a> for lysozyme). 
The error values are used for fitting but are not plotted.
</p><p>
For comparison to experimental data, the structure
should be as similar as possible to the experimental sample in terms of
which atoms are present (not missing domains, loops, or parts of residues).  
<a href="../dockprep/dockprep.html"><b>Dock Prep</b></a> can be used to
repair truncated side chains and/or add
<a href="#implicit">explicit hydrogens</a>.
</p><p>
<a name="options">Clicking <b>Options</b></a> reveals additional settings
(clicking the close button <img src ="../volumeviewer/x.png"</a> on the right
hides them again):
  <ul>
  <li><b>Excluded volume adjustment</b> (<b>on</b> by default)
  - whether to adjust the excluded volume parameter (c1) to improve the fit
  of the theoretical profile to the 
  <a href="#experimental">experimental profile</a>
  <li><b>Hydration (water) layer</b> (<b>on</b> by default)
  - whether to include a hydration layer parameter (c2) to improve the fit
  of the theoretical profile to the 
  <a href="#experimental">experimental profile</a>
  <li><b>Experimental background adjustment</b> (<b>off</b> by default)
  - whether to apply a background adjustment to the
  <a href="#experimental">experimental profile</a>;
  this tends to reduce the intensity at high values of q
  <li><b>Maximal q value</b> (default <b>0.5</b>)
  - up to what value of q the profile should be computed
  <li><b>Profile size</b> (default <b>500</b>)
  - number of points in the computed profile
  <li><a name="implicit"><b>Implicit hydrogens</b></a>
  (<b>on</b> by default)
  - whether to ignore any explicit hydrogen atoms and 
  consider hydrogen atoms 
  for proteins and nucleic acids implicitly by adding their form factors; 
  for proper recognition of these residues, 
  the structure should have standard PDB atom and residue names.
  If the structure includes other groups (lipids, sugars, <i>etc.</i>),
  this option should be turned off and explicit hydrogens added instead.
  <li><b>Fast coarse-grained profile</b>
  (<b>off</b> by default)
  <li><b>Use new plot window</b> 
  (<b>off</b> by default)
  - whether to show the profile in a new
  window instead of adding it to the most recent pre-existing plot
  <li><a name="uselocal"><b>Local executable file (optional)</b></a> 
   - a local copy of the <b>FoXS</b> executable; if none is specified,
  the RBVI web service will be used
  <li><b>Output file location (optional)</b></a> 
   - local directory in which to place results, stderr, and stdout files
  </ul>
For further details, consult the 
<a href="https://modbase.compbio.ucsf.edu/foxs/help.html"
target="_blank">FoXS help</a>.
</p><p>
Clicking <b>Calculate Profile</b> 
computes the theoretical profile and displays it as a solid line.
Data points in the <a href="#experimental">experimental profile</a> (if any)
are shown as plus signs, and a measure of the quality of fit between
the experimental and theoretical profiles, &chi;, is given in the legend.
A lower value of &chi; indicates a better fit.
</p><p>
<b>Close</b> dismisses the <b>Small-Angle X-Ray Profile</b> dialog.
<b>Help</b> opens this manual page in a browser window.
</p>

<a name="plotnav">
<h3>Plot Navigation</h3></a>
<p>
Plots are generated with <a href="https://matplotlib.org"
target="_blank">matplotlib</a>.  Icons for manipulating and saving the
view are provided below the graph.  The mode icons act as toggles:
clicking the icon will turn the mode on or off, depending on the current state.
</p>

<table border cellpadding="4" cellspacing="0" width="50%">
<tr>
<th align="center">icon</th><th align="center">meaning</th>
</tr><tr>
<td align="center"><img src="plot1.png"></td>
<td align="center">default (initial) view</td>
</tr><tr>
<td align="center"><img src="plot2.png"></td>
<td align="center">previous view</td>
</tr><tr>
<td align="center"><img src="plot3.png"></td>
<td align="center">next view</td>
</tr><tr>
<td align="center"><img src="plot4.png"></td>
<td align="center">&ldquo;pan/zoom&rdquo; mode (toggle)</td>
</tr><tr>
<td align="center"><img src="plot5.png"></td>
<td align="center">&ldquo;zoom to rectangle&rdquo; mode (toggle)</td>
</tr><tr>
<td align="center"><img src="plot6.png"></td>
<td align="center">sliders for graph scaling</td>
</tr><tr>
<td align="center"><img src="plot7.png"></td>
<td align="center">save as image file<br>
(it may be necessary to include the proper filename suffix to indicate format:
*.png [Portable Network Graphics],
*.ps [PostScript],
*.eps [Encapsulated PostScript],
*.pdf [Portable Document Format],
*.svg [Scalable Vector Graphics])
</td>
</tr>
</table>

<hr>
<address>UCSF Computer Graphics Laboratory / September 2014</address>
</body>
</html>
