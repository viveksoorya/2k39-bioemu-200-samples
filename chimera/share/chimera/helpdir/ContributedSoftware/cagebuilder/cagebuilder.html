<!--
--- UCSF Chimera Copyright ---
Copyright (c) 2011 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  This notice must be embedded in or
attached to all copies, including partial copies, of the
software or any revisions or derivations thereof.
--- UCSF Chimera Copyright ---
-->

<html>
<head>
<TITLE>Cage Builder</TITLE>
</head>
<body>
<h3>Cage Builder <img src="cageicon.png" alt="Cage Builder icon"></h3>

<table align="right">
<tr><td>
<img src="cage.jpg" alt="Cage Builder figure">
</td></tr>
</table>

<p>
<b>Cage Builder</b> creates polyhedral cages composed of hexagons, pentagons,
squares and other polygons.  The cages can be decorated with atomic models 
to create oligomeric molecular assemblies
using the <a href="../../UsersGuide/midas/sym.html"><b>sym</b></a> command
(see <a href="#placing">examples</a>).
Cages are created as
<a href="../volumepathtracer/framevolpath.html" target="_top">marker sets</a>.
See also:
<a href="../icosahedron/icosahedron.html"><b>Icosahedron Surface</b></a>,
<a href="../../UsersGuide/midas/hkcage.html"><b>hkcage</b></a>,
<a href="../../UsersGuide/midas/meshmol.html"><b>meshmol</b></a>
</p><p>
There are <a href="../../UsersGuide/extension.html">several ways to start</a>
<b>Cage Builder</b>, a tool in the 
<b>Higher-Order Structure</b> category.
</p>
<ul>
<li style="list-style-type:none">
<b>Attach polygons with [ 3 ][ 4 ][ 5 ][ 6 ][ 7 ] sides</b> 
- clicking a number attaches a new polygon of the specified shape
to each currently <a href="../../UsersGuide/selection.html">selected</a>
polygon edge, or if no such edges exist, creates a single new polygon. 
All polygons are part of a single Chimera
<a href="../volumepathtracer/volumepathtracer.html#markersets">marker model</a>
named <b>Cage</b>.  The attached edges are automatically <b><i>joined</i></b>.
Joined edges are shown in lighter colors than unjoined edges.
</ul>
<p>
Clicking <b>Minimize</b> improves the alignment of joined edges.
This is typically done after some rounds of new polygon attachment.
Clicking <b>Delete</b> removes entire polygons that contain any
<a href="../../UsersGuide/selection.html">selected</a> edge or vertex.
<b>Close</b> simply dismisses the dialog, and 
<b>Help</b> opens this manual page in a browser window.
</p><p>
<a name="options">Clicking <b>Options</b></a> reveals additional settings
(clicking the close button <img src ="../volumeviewer/x.png"> on the right
hides them again):
</p>
<ul>
<li><b>[ Join ] or [ Unjoin ] selected polygon edges</b>  
- clicking <b>Join</b> when exactly two edges are
<a href="../../UsersGuide/selection.html">selected</a> will join those edges.  
The two edges should belong to different polygons, and a polygon will be 
relocated as needed to attach and join the edges.
Their previous join partners, if any, will become unjoined;
an edge can only be joined to one other edge at a time.
Clicking <b>Join</b> with fewer or more than two edges selected has no effect.
<b>Unjoin</b> will unjoin all joined pairs with one or both edges selected.
<br><br>
<li><b>Join polygons so that [<i>N</i>] edges meet at a vertex</b> 
(default <b>on</b>) 
- whether to automatically join additional edges during new polygon attachment
or when <b>Join</b> is used, with the constraint that <i>N</i> edges 
(default <b>3</b>) should meet at each vertex.  
For example, if a lone pentagon has all of its edges selected 
and the <b>6</b> button is clicked, not only will a new hexagon
be attached (adjacent edges joined) to each side of the pentagon, 
but also each hexagon will be attached its neighboring hexagons.  
Polygon positions may be adjusted to accommodate joining.
If this option is off, only the edges of new
polygon attachment will be joined automatically.
<br><br>
<li><b>[ Scale ] cage by [<i>f</i>]</b>
- clicking <b>Scale</b> or changing the value and pressing Enter (return)
resizes all polygons and moves them radially
from the geometric center of the cage model by a factor <i>f</i> 
(default <b>2</b>)
<br><br>
<li><b>[ Set ] edge length [<i>e</i>] thickness [<i>t</i>]</b>
&nbsp;&nbsp;&bull;&nbsp; <b>inset [<i>i</i>]</b> (default <b>on</b>)
- clicking <b>Set</b> or changing a value and pressing Enter (return)
updates all polygons in the cage model to the specified 
edge length (default <b>1.0</b>) and stick thickness (default <b>0.2</b>)
in physical units, typically &Aring;. 
With insetting on, the edge lengths are reduced by the inset value 
(default <b>0.1</b>)
so that the edges of attached polygons will not overlap completely.
For well-aligned joined edges, using an inset equal to half the thickness 
makes the sticks representing the edges lie side by side.
With insetting off, the polygons are shown at the nominal size
with attached edges right on top of each other
(to the extent allowed by geometric contraints).
The length, thickness, and inset settings will also be used 
for subsequently created polygons.
<br><br>
<li><b>[ Expand ] cage by [<i>g</i>] times edge length</b>
- clicking <b>Expand</b> or changing the value and pressing Enter (return)
fattens the cage by moving each polygon outward 
along its normal by a factor <i>g</i> (default <b>1</b>) times edge length, 
keeping polygon sizes the same.  
Subsequently clicking <b>Minimize</b> will bring the polygons 
back together, often leaving the whole cage with a rounder shape. 
This option has rather limited usefulness.
<br><br>
<li><b>Create [ Mesh ] model from cage polygons, color</b>
(a <a href="../../UsersGuide/coloring.html#colorwell">color well</a>, 
by default a dark gray)
- clicking <b>Mesh</b> generates a new 
<a href="../volumepathtracer/volumepathtracer.html#markersets">marker model</a>
from the existing polygons, in which attached edges are replaced by 
a single edge and attached vertices are replaced by a single vertex.
The mesh model cannot be edited or resized with the <b>Cage Builder</b> dialog;
all editing should be done with the polygon cage model.
</ul>

<h3>
<a name="placing">Placing Atomic Models on Cages</a>
</h3>

<img src="oligomer.jpg" alt="Molecules on cage figure" align=right>

<p>
Copies of molecular models can be placed on each polygon using the
<a href="../../UsersGuide/midas/sym.html"><b>sym</b></a> command.  
</p><p>
For example, one might want to put a single copy of the structure
at each pentagon (ignoring any other types of polygons).
First, the molecular model would need to be positioned as desired relative 
to one of the pentagons in the cage model.
Models can be positioned relative to one another &ldquo;manually&rdquo; by
<a href="../../UsersGuide/mouse.html#activedef">activating/deactivating</a>
them for motion and <a href="../../UsersGuide/mouse.html">using the mouse</a>.
Then, if the molecule model is #1 and the cage
model is #0, the following would place a copy
of the molecule model at an equivalent position relative to each pentagon:
</p>
<blockquote>
<i>Command</i>: 
<b><a href="../../UsersGuide/midas/sym.html">sym</a> #1 group #0,p5</b>
</blockquote>
<p>
The copies can be removed with
<a href="../../UsersGuide/midas/sym.html"><b>~sym</b></a>.  
</p><p>
Another possibility is to place multiple copies per polygon. For example,
after a molecule model #1 has been positioned relative to (1/6) of a hexagon
in cage model #0, the following would use C<sub>6</sub> symmetry about the
hexagon center to place six copies per hexagon:
</p>
<blockquote>
<i>Command</i>: 
<b><a href="../../UsersGuide/midas/sym.html">sym</a>
#1 group #0,pn6 surface true update true</b>
</blockquote>
<p>
The additional arguments in the second example specify creating low-resolution
<a href="../multiscale/multiscale.html#lowres">multiscale surfaces</a>
instead of atomic copies (for faster rendering)
and updating their positions when the original copy of the molecular model 
is moved relative to the cage.
</p><p>
Currently there is no good way to refine the molecular positions
so that interfaces between molecules are physically realistic.
</p>

<hr>
<address>UCSF Computer Graphics Laboratory / July 2011</address>

</body>
</html>
