<!--
--- UCSF Chimera Copyright ---
Copyright (c) 2013-2014 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  This notice must be embedded in or
attached to all copies, including partial copies, of the
software or any revisions or derivations thereof.
--- UCSF Chimera Copyright ---
-->

<html><head>
<title>Image Tutorial: Opened Interface</title>

<style type="text/css">
A.nounder:link {text-decoration: none}
A.nounder:visited {text-decoration: none}
A.nounder:hover {text-decoration: underline; color: red;}
</style>
</head><body>
<a name="top"></a>

<font size="-1">
<a href="../frametut.html" target="_top">Chimera Tutorials Index</a>
</font>

<h2>Image Tutorial: Opened Interface</h2>

<a name="figures"></a>
<table align="right" style="margin:8px 8px 8px 8px" 
cellpadding="0" cellspacing="0">
<tr>
<td><a href="1avx-kiss.png"><img src="1avx-kiss.png" width="400"
title="click for larger image..." 
alt="trypsin and trypsin inhibitor complex"></a></td>
</tr>
<tr>
<td><a href="1avx-final.png"><img src="1avx-final.png" width="400"
title="click for larger image..." 
alt="trypsin and trypsin inhibitor, interface opened up"></a></td>
</tr>
</table>

<p>
This tutorial describes how to reveal an interface by splaying it open 
like a book. The structures are shown as surfaces with interactive shadows.
See also:
<a href="../../ContributedSoftware/intersurf/intersurf.html"><b>Intersurf</b></a>,
<a href="../menu.html#menupresets">presets</a>,
<a href="../print.html#tips">tips on preparing images</a>
</p>
<ul>
<li><a href="#setup">Background and Setup</a>
<li><a href="#opening">Opening/Closing the Interface</a>
<li><a href="#interface">Coloring the Interface</a>
<li><a href="#orientation">Orientations for Figures </a>
<li><a href="#effects">Finishing Touches</a>
<li><a href="#colorings">Alternative Colorings</a>
</ul>

<h3><a href="#top" class="nounder"><b>&larr;</b></a>
<a name="setup">Background and Setup</a></h3>
<p>
<a href="../startup.html">Start Chimera</a> and
show the <a href="../chimerawindow.html#emulator"><b>Command Line</b></a>
(for example, with <b>Favorites... Command Line</b>).
Fetch Protein Data Bank entry
<a href="https://www.rcsb.org/structure/1AVX" target="_blank">1avx</a>: 
<blockquote>
<i>Command</i>: <b><a href="../midas/open.html">open</a> 1avx</b>
</blockquote>
The structure contains porcine pancreatic trypsin, chain A, 
complexed with a trypsin inhibitor from soybean, chain B.
<a href="getting_started.html#moving">Move and scale</a> (zoom)
with the mouse to see how the two proteins fit together.
Resize the window as desired, either by dragging its lower right corner 
with the mouse or by using the command
<a href="../midas/windowsize.html"><b>windowsize</b></a>. 
The window dimensions define the aspect ratio (width:height)
of output images, but image resolution
can be specified independently when an image is saved.
An 800x500-pixel window was used for the example images at right.
</p><p>
In chain B, there is a break in the ribbon and a dashed line
where atomic coordinates could not be resolved.
Hide this dashed line &ldquo;pseudobond&rdquo; and split the model
to facilitate moving chains independently:
</p>
<blockquote>
<i>Command</i>: <b><a href="../midas/longbond.html">~longbond</a></b>
<br>
<i>Command</i>: <b><a href="../midas/split.html">split</a></b>
</blockquote>
<p>
The original model #0 is now split into model #0.1 containing chain A
and model #0.2 containing chain B.
Models are listed in the <a href="../modelpanel.html"><b>Model Panel</b></a> 
(under <b>Favorites</b> in the menu).
</p><p>
Use the all-atoms preset, change to sticks, delete water, 
and color the two chains differently: 
</p>
<blockquote>
<i>Command</i>: <b><a href="../midas/preset.html">preset</a> apply int 2</b>
<br>
<i>Command</i>: <b><a href="../midas/represent.html">repr</a> stick</b>
<br>
<i>Command</i>: <b><a href="../midas/delete.html">delete</a> solvent</b>
<br>
<i>Command</i>: <b><a href="../midas/color.html">color</a> sea green #0.1</b>
<br>
<i>Command</i>: <b><a href="../midas/color.html">color</a> medium purple #0.2</b>
</blockquote>
<p>
Splitting is also one way to indicate that the molecular surface should
enclose each chain separately instead of collectively. Show the surface:
</p>
<blockquote>
<i>Command</i>: <b><a href="../midas/surface.html">surface</a></b>
</blockquote>

<h3><a href="#top" class="nounder"><b>&larr;</b></a>
<a name="opening">Opening/Closing the Interface</a></h3>
<p>
One key to making figures is saving and restoring
<a href="../midas/savepos.html">positions</a>.
For example, the following saves the current position and names it <b>p1</b>:
<blockquote>
<i>Command</i>:
<b><a href="../midas/savepos.html">savepos</a> p1</b>
</blockquote>
<p>
After the view or individual structures have been moved around, 
the position can be restored with:
</p>
<blockquote>
<i>Command</i>:
<b><a href="../midas/reset.html">reset</a> p1</b>
</blockquote>
<p>
... or even restored gradually, over a specified number of frames:
</p>
<blockquote>
<i>Command</i>:
<b><a href="../midas/reset.html">reset</a> p1 80</b>
</blockquote>
<p>
You can save/restore multiple positions using different names, 
and positions are included in subsequently saved
<a href="../sessions.html#sesdef">session</a> files.
To save your work at any point, save a
<a href="../sessions.html#sesdef">session</a> (see the <b>File</b> menu).
</p><p>
To open the interface, we will:
</p>
<ol>
<li>orient the complex so that trypsin (green) is on the left and the
inhibitor (purple) is on the right, with the interface approximately edge-on
<li>rotate each protein 90&deg; so that its interface surface 
is facing the viewer
<li>translate the proteins apart horizontally
</ol>
<p>
The first step will be done <a href="getting_started.html#moving">with the
mouse</a>, but we will create command aliases for the other two since
they may be done many times starting from different initial orientations.
To avoid typing long commands, you can copy text from this page
and paste it into the <b>Command Line</b>:
</p>
<a name="aliases"></a>
<blockquote>
<i>Command</i>:&nbsp;<b><a href="../midas/alias.html">alias</a>&nbsp;&nbsp;^face-me&nbsp;&nbsp;<a href="../midas/set.html#independent">set&nbsp;independent</a>;&nbsp;&nbsp;<a href="../midas/turn.html">turn</a>&nbsp;y&nbsp;-90&nbsp;model&nbsp;&nbsp;#0.1;&nbsp;<a href="../midas/turn.html">turn</a>&nbsp;y&nbsp;90&nbsp;model&nbsp;&nbsp;#0.2;&nbsp;<a href="../midas/set.html#independent">~set&nbsp;independent</a></b>
<br>
<i>Command</i>:&nbsp;<b><a href="../midas/alias.html">alias</a>&nbsp;&nbsp;^separate&nbsp;&nbsp;<a href="../midas/move.html">move</a>&nbsp;x&nbsp;$1&nbsp;model&nbsp;&nbsp;#0.2;&nbsp<a href="../midas/center.html">center</a></b>
</blockquote>
<p>
**These aliases assume the complex is oriented so that #0.1 (trypsin, green) 
is on the left and #0.2 (inhibitor, purple) is on the right.**
Aliases can be used in the <b>Command Line</b>, and <b>face-me</b> also appears
in the <b>Aliases</b> menu; <b>separate</b> does not, because it requires
also entering the distance of separation (&Aring;).
The &ldquo;^&rdquo; symbol means the alias should only be expanded when
it appears at the beginning of a command.
In the <a href="../sideview.html#rotation">independent rotation mode</a>,
each model rotates about its own center rather than a single collective center.
</p><p>
Before using the aliases, generate initial positions by moving the complex
<a href="getting_started.html#moving">with the mouse</a>.
If you have already separated the proteins and/or rotated them independently,
first put the complex back together, for example:
</p>
<blockquote>
<i>Command</i>:
<b><a href="../midas/reset.html">reset</a> default</b>
</blockquote>
</p>
The <b>default</b> position is that without user-applied rotations and
translations, as when the structures were first opened.
For using the aliases, a good initial position of the complex 
has trypsin on the left and the inhibitor on the right, 
with the interface approximately edge-on 
(similar to the top image <a href="#top">above</a>, but could be 
rotated differently about the horizontal axis).
When you have what seems to be a good initial position, save it,
use the aliases to open the interface, and save the open position.
For example:
</p>
<blockquote>
<i>Command</i>: <b><a href="../midas/savepos.html">savepos</a> closed</b>
<br>
<i>Command</i>: <b><a href="#aliases">face-me</a></b>
<br>
<i>Command</i>: <b><a href="#aliases">separate</a> 18</b>
<br>
<i>Command</i>: <b><a href="../midas/savepos.html">savepos</a> open</b>
</blockquote>
<p>
You can start over by resetting to the <b>closed</b> position 
(or whatever you named it).
An existing position can be overwritten by saving to the same name.
However, don't worry about optimizing the positions for figures yet.
The goal at this stage is to simplify opening/closing the interface 
to evaluate colorings.
</p>

<h3><a href="#top" class="nounder"><b>&larr;</b></a>
<a name="interface">Coloring the Interface</a></h3>
<p>
Any one of the following three methods could be used to identify and color
the binding interface.
Remember to put the structures in the bound state (closed-interface position) 
before running calculations, and if trying different methods or parameter
values, recoloring the proteins between trials
as in the <a href="#setup">setup</a>. Previous commands can be 
re-executed using the <a href="../history.html">command history</a>.
(Advanced users may be interested in some additional
<a href="openbook-aliases.cmd" type="text/plain">aliases</a> 
used during tutorial development.)
Reset to an open-interface position to see the coloring results.
</p><p>
<a name="method1"></a>
<b>Method 1</b> (used for the <a href="#figures">figures</a>)
identifies atom-atom contacts with
<a href="../../ContributedSoftware/findclash/findclash.html"><b>Find Clashes/Contacts</b></a>
or its command equivalent,
<b><a href="../midas/findclash.html">findclash</a></b>.
<blockquote>
With the proteins in the bound state:
</p>
<blockquote>
<i>Command</i>: <b><a href="../midas/findclash.html">findclash</a>&nbsp;&nbsp;#0.1&nbsp;&nbsp;test&nbsp;#0.2&nbsp;&nbsp;intersub&nbsp;true&nbsp;&nbsp;overlap&nbsp;&nbsp;-1&nbsp;&nbsp;hb&nbsp;0&nbsp;&nbsp;make&nbsp;false&nbsp;&nbsp;select&nbsp;true</b>
<br>
<i>Command</i>: <b><a href="../midas/namesel.html">namesel</a> contacts</b>
<br>
<i>Command</i>: <b><a href="../midas/select.html#newer">~select</a></b>
<br>
<i>Command</i>: <b><a href="../midas/color.html">color</a> 
yellow contacts&amp;#0.1</b>
<br>
<i>Command</i>: <b><a href="../midas/color.html">color</a> 
hot pink contacts&amp;#0.2</b>
</blockquote>
In the <b><a href="../midas/findclash.html">findclash</a></b> command,
the <b>overlap</b> and <b>hb</b> parameters are adjustable, 
with values of 0.0-(&ndash;1.0) &Aring; and 0.0 &Aring;, respectively,
recommended for finding <b><i>contacts</i></b>.
An <b>overlap</b> cutoff of &ndash;1.0 identifies pairs of atoms 
with VDW surfaces up to 1.0 &Aring apart.  When the command is instead
used to find only <b><i>clashes</i></b> (unfavorable, too-close contacts),
<b>hb</b> values &gt; 0.0 help to exclude H-bonding atom pairs.
The two sets of atoms are specified with model numbers
(<i>e.g.</i> <b>#0.1</b>), but chain identifiers could have been used 
instead (<i>e.g.</i> <b>:.a</b>), and if water had not been deleted, 
the calculation could have been limited explicitly to protein
(<i>e.g.</i> <b>#0.1&amp;protein</b> or <b>:.a&amp;protein</b>).
</p>
</blockquote>
<b>Method 2</b> first calculates buried surface area, then uses 
the resulting per-atom values (assigned as atom
<a href="../../ContributedSoftware/defineattrib/defineattrib.html#attribdef">attributes</a>)
to identify interface atoms. 
<blockquote>
With the proteins in the bound state:
<blockquote>
<i>Command</i>: <b><a href="../midas/measure.html#buriedArea">measure&nbsp;buriedArea</a>&nbsp;&nbsp;#0.1&nbsp;&nbsp;#0.2</b>
<br>
<i>Command</i>: <b><a href="../midas/color.html">color</a>&nbsp;yellow&nbsp;&nbsp;#0.1@/buriedSESArea>1</b>
<br>
<i>Command</i>: <b><a href="../midas/color.html">color</a>&nbsp;hot&nbsp;pink&nbsp;&nbsp;#0.2@/buriedSESArea>1</b>
</blockquote>
<p>
The total buried area and details of the calculation are given in the
<a href="../reply.html"><b>Reply Log</b></a>.
Different cutoff values could be used, but in this case, atoms with
&gt; 1.0 &Aring;<sup>2</sup> of solvent-excluded surface area buried 
in the interface are similar to the set of atoms found in the
<a href="#method1">method&nbsp;1</a> example.
Although solvent, ions, and ligands are not enclosed in the displayed
surfaces, the buried-area calculation will include all specified atoms.
Thus it is important to specify only the intended atoms; for example, 
if nonprotein atoms were present:
</p>
<blockquote>
<i>Command</i>: <b><a href="../midas/measure.html#buriedArea">measure&nbsp;buriedArea</a>&nbsp;&nbsp;#0.1&amp;protein&nbsp;&nbsp;#0.2&amp;protein</b>
</blockquote>
</blockquote>
<p>
<b>Method 3</b> identifies where surfaces are close to one another
and does not involve atoms. 
</p>
<blockquote>
With the proteins in the bound state and surfaces shown:
<blockquote>
<i>Command</i>: <b><a href="../midas/measure.html#contactArea">measure&nbsp;contactArea</a>&nbsp;&nbsp;#0.1&nbsp;&nbsp;#0.2&nbsp;&nbsp;2.5&nbsp;&nbsp;color&nbsp;yellow&nbsp;offset&nbsp;0</b>
<br>
<i>Command</i>: <b><a href="../midas/measure.html#contactArea">measure&nbsp;contactArea</a>&nbsp;&nbsp;#0.2&nbsp;&nbsp;#0.1&nbsp;&nbsp;2.5&nbsp;&nbsp;color&nbsp;hotpink&nbsp;offset&nbsp;0</b>
</blockquote>
<p>
These commands identify where the surfaces are within 2.5 &Aring; of each other.
Again, different cutoffs could be used, but 2.5 gave a result roughly similar
to the preceding examples. The specifications in the contact-area command 
(<i>e.g.</i> <b>#0.1</b>) refer to the surface models, which happen to have 
the same model numbers as the corresponding atomic structures.
</p>
</blockquote>

<h3><a href="#top" class="nounder"><b>&larr;</b></a>
<a name="orientation">Orientations for Figures</a></h3>
<p>
Start the <a href="../sideview.html#sideview"><b>Side View</b></a>
(under <b>Favorites</b> in the menu)
and place it beside the Chimera window so that you can see the structure
from two directions at once.
By default, Chimera uses perspective, in which nearer parts of structures
appear larger. This enhances 3D perception, but subtly distorts structures
as the eye proceeds from the center of the Chimera window towards the edges.
The orthographic projection (no perspective) may be
better for certain images such as side-by-side comparisons:
</p>
<blockquote>
<i>Command</i>:
<b><a href="../midas/set.html#projection">set projection</a> ortho</b>
</blockquote>
<p>
Continue translating, rotating, and zooming
<a href="getting_started.html#moving">with the mouse</a>,
saving and resetting positions, and using the aliases to generate
final views. Starting from a position with the intact complex,
the <b>face-me</b> alias should only be used once, since 
it applies a 90&deg; rotation to open the interface.
However, it is fine to use <b>separate</b> multiple times,
or scale or translate the view as a whole
<a href="getting_started.html#moving">using the mouse</a> (carefully!)
and/or commands, for example:
</p>
<blockquote>
<i>Command</i>: <b><a href="../midas/move.html">move</a> x -8</b>
<br>
<i>Command</i>: <b><a href="../midas/scale.html">scale</a> 1.4</b>
<br>
<i>Command</i>: <b><a href="../midas/move.html">move</a> y 2</b>
</blockquote>
<p>
It is prudent to save your favorite views as positions, then save a session
(and save a session again after incorporating any
<a href="#effects">finishing touches</a>).
You can overwrite an existing position or session by using the same name.
</p>

<h3><a href="#top" class="nounder"><b>&larr;</b></a>
<a name="effects">Finishing Touches</a></h3>
<p>
Many different visual effects can be applied, and choosing which to apply
depends on both personal taste and what the image is meant to illustrate.
The example images <a href="#top">above</a>
were made with smooth molecular surfaces, a white background, and shadows:
</p>
<blockquote>
<i>Command</i>:
<b><a href="../midas/setattr.html">setattr</a> s density 8</b>
<br>
<i>Command</i>:
<b><a href="../midas/background.html">back</a> solid white</b>
<br>
<i>Command</i>:
<b><a href="../midas/set.html#shadows">set</a> shadows</b>
</blockquote>
<p>
The vertex density of a molecular surface (default 2) controls the 
fineness of triangulation, with higher values giving a greater number of
smaller triangles and a smoother-looking surface.
</p>

<h3><a href="#top" class="nounder"><b>&larr;</b></a>
<a name="colorings">Alternative Colorings</a></h3>

<table align="right" style="margin:8px 8px 8px 8px" 
cellpadding="4" cellspacing="0">
<tr>
<td><img src="1avx-coulombic.png" width="400"
alt="trypsin and inhibitor colored by Coulombic ESP"></td>
</tr><tr>
<td><img src="1avx-convexity.png" width="400"
alt="trypsin and inhibitor colored by convexity"></td>
</tr>
</table>

<p>
Of course, many other combinations of effects and coloring schemes 
are possible. Just to name a few, surfaces could be colored to show 
hydrophobic/hydrophilic compatibility or electrostatic complementarity 
as in the <a href="surfprop.html">Surface Properties tutorial</a>,
conservation within associated sequence alignments as in the
<a href="super.html">Sequences and Structures tutorial</a>,
or concavity/convexity as in the 
<a href="attributes.html#part2">Attributes tutorial, part 2</a>.
A color key and text could be added, as in the
<a href="bfactor.html">B-factor Coloring tutorial</a>.
</p><p>
If a coloring scheme includes white, it may be helpful to make the
background a different color:
</p>
<blockquote>
<i>Command</i>: <b><a href="../midas/background.html">back</a> solid light blue</b>
</blockquote>
<p>
To color by Coulombic electrostatic potential:
</p>
<blockquote>
<i>Command</i>: <b><a href="../midas/coulombic.html">coulombic</a>&nbsp;-10&nbsp;red&nbsp;0&nbsp;white&nbsp;10&nbsp;blue</b>
</blockquote>
<p>
The result shows a predominantly positive protuberance on the inhibitor 
(right) interacting with a primarily negative pocket on the enzyme (left),
with the opposite charge pattern on surrounding areas.
</p><p>
To color by per-residue concavity/convexity, open the
<a href="../../ContributedSoftware/calculator/calculator.html"><b>Attribute
Calculator</b></a> (<b>Tools... Structure Analysis... Attribute Calculator</b>).
Calculate a new attribute named <b>convexity</b> for <b>residues</b>
using the <b>Formula</b>
<blockquote>
residue.areaSAS/residue.areaSES
</blockquote>
Values of <b>convexity</b>
&gt; 1 represent convex areas, while values &lt; 1 represent concave areas.
Click <b>OK</b> to perform the calculation and assignment.
A warning message will appear because some residues have an
<b>areaSES</b> of zero, resulting in a divide-by-zero error.
However, just close the warning dialog; values have been assigned correctly 
to the remaining residues. The coloring command could be something like:
</p>
<blockquote>
<i>Command</i>: <b><a href="../midas/rangecolor.html">rangecolor</a>&nbsp;convexity&nbsp;min&nbsp;purple&nbsp;1&nbsp;white&nbsp;max&nbsp;yellow</b>
</blockquote>
<p>
The result mainly serves to emphasize what is already evident from the
shadowed surfaces: that a knobby protuberance on the inhibitor 
plugs into a socket on trypsin.
The <a href="attributes.html#part2">Attributes tutorial, part 2</a>
describes showing per-atom rather than per-residue convexity, but the
results are similar.
<hr>
<address>meng-at-cgl.ucsf.edu / October 2014</address>
</body>
</html>
