<!--
--- UCSF Chimera Copyright ---
Copyright (c) 2000-2015 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  This notice must be embedded in or
attached to all copies, including partial copies, of the
software or any revisions or derivations thereof.
--- UCSF Chimera Copyright ---
-->

<html><head>
<title>3D Manipulation</title>
</head><body>
<h2>3D Manipulation</h2>
<p>
A mouse or touchpad (trackpad) can be used to manipulate the
view of structures and other 3-dimensional data in the
<a href="chimerawindow.html">Chimera graphics window</a>.
The <a href="preferences.html#Mouse"><b>Mouse</b> preferences</a>
contain assignments for a three-button mouse,
but a <a href="#2button">one- or two-button mouse</a> can also be used.
Users of the <b>Mac X11</b> version of Chimera, 
see <a href="#x11note">below</a>.
See also:
<a href="../ContributedSoftware/movemode/movemode.html"><b>Movement 
Mouse Mode</b></a>,
<a href="../ContributedSoftware/constrained/constrained.html"><b>Constrained 
Move</b></a>,
<a href="#otherinput">other input devices</a>
</p><p>
In the laboratory coordinate system,
the <b>X axis</b> is horizontal in the plane of the
screen, the <b>Y axis</b> is vertical in the plane of the screen, and the
<b>Z axis</b> is perpendicular to the plane of the screen.
By <b><i>default</i></b>, <a href="#activedef">active</a> models can be:
<ul>
<li><b>rotated</b> with the left mouse button
in the graphics window.  Rotation is about the
<b>X</b> and/or <b>Y</b> axis when the cursor is in the central region
of the graphics window (the cursor becomes a small circle) and
about the <b>Z</b> axis when the cursor is in the periphery of the
graphics window (the cursor becomes two curved arrows in yin-yang
configuration).  The center of rotation can be adjusted with the
<a href="sideview.html#rotation"><b>Rotation</b> tool</a> or the command 
<a href="midas/cofr.html"><b>cofr</b></a>.
<br><br>
<li><b>XY-translated</b> with the middle mouse button
(the cursor will look like a cross formed by two double-headed arrows).
On <b>Windows</b>, depending on the mouse setup,
<a href="ntmouse.html">an adjustment</a> may be required.
<br><br>
<li><b>scaled</b> (zoomed) with the right mouse button (the cursor will look
like a diagonal double-headed arrow enclosing a small square);
movements downward and/or to the right increase the scale,
whereas movements upward and/or to the left decrease it.
Interactive scaling can also be done with the
<a href="sideview.html#sideview"><b>Side View</b></a>
and possibly scrolling.
<br><br>
<li><b>Z-translated</b> with <b>Ctrl</b>-middle mouse button 
(the cursor will look like a vertical double-headed arrow);
movements downward and/or to the right translate
structures closer, and movements upward and/or to the left
translate structures farther away.  Note that Z-translation is not the same
as scaling.
</ul>
<a name="othermouse">
Also by <b><i>default</i></b></a>, 
<ul>
<li><b>Ctrl</b>-left mouse button performs 
<a href="selection.html#pickselect">picking</a> 
(selection from the graphics window); 
the cursor will look like a pointing hand.
Doubleclicking while picking an atom or bond elicits a
<a href="#contextmenus">context menu</a>.
<br><br>
<li><b>Ctrl</b>-right mouse button centers a clicked item
(atom, bond, <a href="pbpanel.html#pbdef">pseudobond</a>, residue ribbon,
or <a href="surfattrib.html#surfpiecedef">surface piece</a>)
and makes the centered point a
<b>fixed</b> <a href="sideview.html#rotation">center of rotation</a>;
clicking empty space restores the <b>front center</b>
<a href="sideview.html#rotation">rotation mode</a>.
<br><br>
<li>Pausing the cursor over an atom or bond (without
clicking any buttons) will show the corresponding label information 
in an <b>atomspec balloon</b>, and the PDB description of the chain,
if available, in the <a href="chimerawindow.html#statusline">status line</a>.
Whether to show atomspec balloons can be set in the
<a href="preferences.html#Labels"><b>Labels</b> preferences</a>.
Similarly, many dialogs 
include <b>balloon help</b>, additional text that is displayed 
when the cursor is paused near some relevant part of the dialog.
Whether to show balloon help can be set in the
<a href="preferences.html#Messages"><b>Messages</b> preferences</a>.
</ul>
Mouse button assignments and whether to use scrolling can be changed in the
<a href="preferences.html#Mouse"><b>Mouse</b> preferences</a>.
</p><p>
Additionally holding down the <b>Shift</b> key reduces the sensitivity to
mouse manipulations in the main window and the
<a href="sideview.html#sideview"><b>Side View</b></a> by a factor of 10.
</p><p>
<a name="x11note">
Users of the <b>Mac X11</b> version of Chimera on Mac OS 10.5 or higher
may need to turn on emulation of a 3-button mouse</a>
in the <b>Input</b> section of the <b>X11</b> preferences.
This is not an issue for the native Mac (non-X-Windows)
version of Chimera.
</p>

<a name="2button">
<h3>Touchpad or One- or Two-Button Mouse</h3>
</a>
<p>
Used alone, a one-button mouse or simple touchpad click-and-drag
acts as button 1, but buttons 2 and 3 can be emulated with modifier keys.
On a Mac, buttons 2 and 3 can be emulated with the <b>option</b> and 
<b>command</b> (<img src="icon-clover.png" height=12px width=12px>) keys,
respectively.
For example, touchpad click-and-drag with the <b>option</b> key held down
performs the button 2 action, XY-translation by default.
See also <a href="#multitouch">multitouch actions</a>.
</p><p>
A two-button mouse is also quite workable.
The two buttons can be assigned to rotation and (XY) translation,
as alternative methods are available for interactive scaling
(<a href="sideview.html#sideview"><b>Side View</b></a> and possibly
scrolling and/or <a href="#multitouch">touchpad pinch</a>).
Button 1 is already assigned to rotation by default, but depending on whether
the other mouse button is treated as button 2 or 3, it may be necessary to use
the <a href="preferences.html#Mouse"><b>Mouse</b> preferences</a> to assign
it to translation.
</p><p>
An <a href="https://www.apple.com/shop/mac/accessories/mice-keyboards"
target="_blank">Apple Magic Mouse</a> allows scrolling and 
can be configured to act as if it had three buttons:
</p>
<ul>
<li>&ldquo;secondary click&rdquo; can be enabled in the Mac System Preferences
(acts as button 3 in Chimera)
<li>the free
<a href="http://magicprefs.com/" target="_blank">MagicPrefs app</a> 
can be used to activate middle click (acts as button 2 in Chimera)
</ul>

<a name="multitouch">
<h3>Multi-Touch Actions</h3>
</a>
<p>
Whether to use multitouch gestures on Mac (default true) is specified in the 
<a href="preferences.html#Mouse"><b>Mouse</b> preferences</a>.
On a Mac touchpad, these are:
<ul>
<li>two-finger drag - XY-rotation
<li>two-finger twist - Z-rotation
<li>pinch motion - zooming (scaling)
<li>three-finger drag - XY-translation
</ul>
</p>

<a name="activedef">
<h3>Activation for Motion</h3>
</a>
A model must be <b><i>active</i></b> (activated for motion)
to move in response to manipulations. Models are active by default.
Toggling model activation status allows users to manually position 
one model relative to another. Models can be activated/deactivated using:
<ul>
<li>the <b>A</b>(ctive) checkboxes or activation 
<a href="modelpanel.html#functions">function buttons</a>
in the <a href="modelpanel.html"><b>Model Panel</b></a>
<li>the model-activation checkboxes below the
<a href="chimerawindow.html#emulator"><b>Command Line</b></a>
(shown by default, see the
<a href="preferences.html#Command Line"><b>Command Line</b> preferences</a>)
<li>the command <a href="midas/select.html#older"><b>select</b></a>
</ul>

<a name="contextmenus">
<h3>Context Menus</h3>
</a>
Doubleclicking while <a href="selection.html#pickselect">picking</a> 
an atom or bond elicits a pop-up menu with entries that depend on the context:
<ul>
<li>for an atom when 0 or &gt;3 other atoms are 
<a href="selection.html">selected</a>:
  <ul>
  <li>if the atom is a metal ion, <b>Coordination Geometry</b>
  - open the <a href="../ContributedSoftware/metalgeom/metalgeom.html"><b>Metal
  Geometry</b></a> tool
  <li><b>Show Distances to Nearby Residues</b> - label and display residues 
  with any atom within 3.6 &Aring; of the current atom, show the corresponding 
  <a href="../ContributedSoftware/structuremeas/structuremeas.html#distances">distance monitors</a>
(ignoring atoms in the same residue as or within two bonds of the current atom),
  remove monitors and labels previously shown for another atom 
  using this function; toggles to <b>Hide Distances...</b>
  to remove monitors and labels previously shown for the current atom
  <li><b>Modify Atom</b> - open the 
  <a href="../ContributedSoftware/editing/editing.html#modify"><b>Modify 
  Structure</b></a> dialog
  <li><b>Set Pivot</b></a> - set fixed
  <a href="sideview.html#rotation">center of rotation</a>
  at the atom
  <li><b>Inspect</b> 
   - open <a href="inspection.html"><b>Selection Inspector</b></a>
  </ul>
<li>for an atom when one other atom is <a href="selection.html">selected</a>:
  <ul>
  <li><b>Show Distance</b> - create a
  <a href="../ContributedSoftware/structuremeas/structuremeas.html#distances">distance monitor</a> 
  between the two atoms
  <li><b>Inspect</b> 
   - open the <a href="inspection.html"><b>Selection Inspector</b></a>
  </ul>
<li>for an atom when two other atoms are <a href="selection.html">selected</a>:
  <ul>
  <li><b>Measure Angle</b> - show a measurement of the angle formed by the
  three atoms in the 
  <a href="../ContributedSoftware/structuremeas/structuremeas.html#angles"><b>Angles/Torsions</b></a> dialog
  <li><b>Inspect</b> 
   - open the <a href="inspection.html"><b>Selection Inspector</b></a>
  </ul>
<li>for an atom when three other atoms are <a href="selection.html">selected</a>:
  <ul>
  <li><b>Measure Torsion</b> - show a measurement of the torsion angle formed 
  by the four atoms in the
  <a href="../ContributedSoftware/structuremeas/structuremeas.html#angles"><b>Angles/Torsions</b></a> dialog
  <li><b>Inspect</b> 
   - open the <a href="inspection.html"><b>Selection Inspector</b></a>
  </ul>
<li>for a bond when no other bonds are <a href="selection.html">selected</a>:
  <ul>
  <li><b>Rotate Bond</b> - activate the bond for rotation, open the
  <a href="../ContributedSoftware/editing/editing.html#adjust"><b>Adjust
  Torsions</b></a> dialog
  <li><b>Adjust Bond</b> - open the 
  <a href="../ContributedSoftware/editing/editing.html#bond"><b>Adjust
  Bonds</b></a> dialog to delete the bond or change its length
  <li><b>Select Bonded</b></a> 
  - <a href="selection.html">select</a> the flanking atoms
  <li><b>Inspect</b> 
   - open the <a href="inspection.html"><b>Selection Inspector</b></a>
  </ul>
<li>for a <a href="pbpanel.html#pbdef">pseudobond</a>, or 
for a bond when other bonds are <a href="selection.html">selected</a>:
  <ul>
  <li><b>Select Bonded</b></a> 
  - <a href="selection.html">select</a> the flanking atoms
  <li><b>Inspect</b> 
   - open the <a href="inspection.html"><b>Selection Inspector</b></a>
  </ul>
</ul>

<a name="otherinput">
<h3>Other Input Devices</h3>
</a>
<ul>
<li><a href="#snav">SpaceNavigator</a>
<li><a href="#leapmotion">Leap Motion Controller</a>
</ul>
<p>
See also: <a href="https://www.cgl.ucsf.edu/Outreach/technotes/index.html"
target="_blank">RBVI Technology Notes</a>
</p>

<a name="snav"><h4>SpaceNavigator</h4></a>
<p>
Chimera supports the 
<a href="https://www.3dconnexion.com/" target="_blank">3Dconnexion</a>
SpaceNavigator<small><sup>TM</sup></small> input device.  
Other 3Dconnexion devices may also work. 
The 3Dconnexion driver must be installed, except on Linux, where
<a href="https://sourceforge.net/projects/spacenav/"
target="_top">spacenavd</a> (an 
open-source alternative to the 3Dconnexion driver) must be installed.
Thanks to Thomas Margraf, University of Hamburg, for the Linux implementation.
</p><p>
Besides a cap that can be tilted, rotated, and pushed/pulled in 
any direction, the SpaceNavigator
has two buttons with the possible Chimera functions:
<ul>
<li><b>Button 1</b> or <b>Fit</b> centers the models 
and scales them to fit in the window
<li><b>Button 2</b> toggles a mode allowing 
simultaneous rotation and translation (the default 
<a name="dominant"><b><i>dominant mode</i></b></a>
only allows rotation or translation depending on which user motion
has the larger amplitude)
</ul>
The <b>Zoom Direction</b> controls how the cap coordinate system relates
to the screen coordinate system:
<ul>
<li> when <b>up/down</b> cap motion zooms the models, 
the tabletop plane maps to the plane of the screen; 
the systems are related by a rotation of approximately 90&deg;
<li> when <b>closer/farther</b> cap motion zooms the models, 
the systems are approximately aligned
</ul>
Zoom direction and other settings are shown in system dialogs
(for example, the Windows Control Panel or Mac System Preferences), 
although some of the Mac controls appear to have no effect.
</p><p>
<a href="../ContributedSoftware/accelerators/accelerators.html">Accelerators</a>
(keyboard shortcuts) for changing SpaceNavigator behaviors:
<ul>
<li><b>na</b> - toggle between moving all models and moving only the 
<a href="#activedef">active</a> models
<li><b>nd</b> - toggle between <a href="#dominant">dominant mode</a> 
and allowing simultaneous rotation and translation
<li><b>nf</b> - toggle <b><i>fly-through mode</i></b>, 
where the device moves the viewpoint rather than the models
(as if all axes were reversed); currently hard to control
<li><b>nz</b> - toggle whether model in/out motion is true zooming
(scaling the entire scene) or Z-translation (moving models relative 
to the front and back clipping planes)
</ul>
Accelerators are disabled by default.  One way to enable their use is
with the command <a href="midas/ac.html"><b>ac</b></a>.
</p><p>
SpaceNavigator problems on Mac:
<ol>
<li>Chimera responds to SpaceNavigator even when it does not have the application focus.
<li>SpaceNavigator response becomes sluggish after hours of use or idle time.
<li>SpaceNavigator response stops after computer wakes from sleep.
</ol>
Restarting Chimera resolves problems 2 and 3.
</p>
<a name="leapmotion"><h4>Leap Motion Controller</h4></a>
<p>
The <a href="https://www.leapmotion.com/product" 
target="_blank">Leap Motion Controller</a>
uses two cameras to track finger and hand movements.
The <a href="midas/leap.html"><b>leap</b></a> command controls the device's
mode of interaction with Chimera.
</p>
<hr>
<address>UCSF Computer Graphics Laboratory / March 2015</address>
</body></html>
