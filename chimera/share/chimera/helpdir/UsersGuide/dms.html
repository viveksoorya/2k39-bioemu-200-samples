<!--
--- UCSF Chimera Copyright ---
Copyright (c) 2000-2013 Regents of the University of California.
All rights reserved.  This software provided pursuant to a
license agreement containing restrictions on its disclosure,
duplication and use.  This notice must be embedded in or
attached to all copies, including partial copies, of the
software or any revisions or derivations thereof.
--- UCSF Chimera Copyright ---
-->

<html><head>
<title>MS and DMS Files</title>
</head><body>
<a name="dmsfile">
<h3>MS and DMS Files</h3></a>
<p>
MS and DMS files contain dot molecular surfaces in the format
output by the programs <i>ms</i> (written by Michael Connolly)
and <a href="midas/dms1.html"><i>dms</i></a> (a reimplementation
<a href="https://www.cgl.ucsf.edu/Overview/software.html#dms"
target="_blank">available</a>
from the UCSF Computer Graphics Lab).
This <a href="midas/dms1.html#dmsformat">format</a> is referred to
as "DMS" below.  Such files can also be created with the Chimera tool 
<a href="#writedms"><b>Write DMS</b></a>.
</p><p>
DMS files can be used as input to
<a href="http://dock.compbio.ucsf.edu/DOCK_6/dock6_manual.htm#Sphgen"
target="_blank"><i>sphgen</i></a>, part of the
<a href="http://dock.compbio.ucsf.edu/index.html" target="_blank">DOCK</a>
suite of programs.  See also: <a href="sphgen.html">Sphgen sphere files</a>
</p><p>
In Chimera, there are
<a href="filetypes.html">several ways</a> to open DMS files.  File type is
indicated with a suffix (<b>.ms</b> or <b>.dms</b>, part of the filename)
or a prefix (<b>ms:</b> or <b>dms:</b>, not part of the filename).  
</p><p>
Although DMS files contain solvent-excluded molecular surfaces,
they are read into Chimera as VRML models that will not update to reflect
changes in any corresponding atoms.
Only a single color, set when the file is opened, is used.
However, a DMS surface can be associated with a 
particular molecule model so that the two cannot be moved 
or <a href="mouse.html#activedef">activated/deactivated</a> 
for motion independently.
</p><p>
Surface-related Chimera menu items and the command
<a href="midas/surface.html"><b>surface</b></a> only apply to
<a href="representation.html#surfaces">MSMS surfaces</a>,
not VRML surfaces.
</p>

<h3><a name="writedms">Write DMS</a> <img src="writedmsicon.png"></h3>
<p>
<b>Write DMS</b> saves part or all of a
<a href="representation.html#surfaces">molecular surface</a> 
in Chimera as a <a href="#dmsfile">DMS file</a>, such as used by the
<a href="http://dock.compbio.ucsf.edu/DOCK_6/dock6_manual.htm#Sphgen"
target="_blank"><i>sphgen</i></a> module of
<a href="http://dock.compbio.ucsf.edu/index.html" target="_blank">DOCK</a>.
See also: <a href="sphgen.html">Sphgen sphere files</a>
</p><p>
Since Chimera's surface calculation method differs from that in the program
<a href="midas/dms1.html"><i>dms</i></a>, the dots in DMS files produced
in the two different ways will not coincide exactly,
but parameters can be set to make the results as similar as possible.  
For example,
the <a href="midas/dms1.html"><i>dms</i></a> default density setting
of 1.0 gives ~5.0 dots/&Aring;<sup>2</sup> whereas the Chimera default is 
2.0 dots/&Aring;<sup>2</sup>. 
The vertex density in Chimera can be specified in the
<a href="midas/surface.html"><b>surface</b></a> command or changed in a 
pre-existing surface with <a href="midas/setattr.html"><b>setattr</b></a>,
for example:
<blockquote>
<i>Command</i>: <b><a href="midas/setattr.html">setattr</a> s density 5</b>
</blockquote>
Additional ways to change the <b>vertex density</b> and related parameters 
are given <a href="#otherparms">below</a>.
</p><p>
There are <a href="extension.html">several ways to start</a>
<b>Write DMS</b>, a tool in the <b>Structure Editing</b> category.
The <a href="representation.html#surfaces">MSMS surface</a> 
of interest should be chosen from the pulldown list.
Options:
<ul>
<li><b>Save normals</b> - include normal vectors 
(required by 
<a href="http://dock.compbio.ucsf.edu/DOCK_6/dock6_manual.htm#Sphgen"
target="_blank"><i>sphgen</i></a>)
<li><b>Limit output to displayed surface sections</b>
- only write surface vertices that are displayed,
which could include vertices that are invisible due to 
<a href="clipping.html">clipping</a> or
<a href="../ContributedSoftware/surfzone/surfzone.html">zoning</a>,
or that simply fall outside the current view.  
Display of per-atom surface patches can be controlled with the
<a href="midas/surface.html"><b>surface</b></a> command or with the
<a href="menu.html#actsurface"><b>Actions... Surface</b></a> menu.
</ul>
<b>Save</b> writes a DMS file using the specified name and location and
dismisses the dialog, while <b>Close</b> simply dismisses the dialog.
<b>Help</b> opens this manual page in a browser window.
</p>
<a name="otherparms">
Other possibly relevant surface parameters:
</a>
<ul>
<li><b>probe radius</b> - the
<a href="midas/dms1.html"><i>dms</i></a> default and Chimera
default are both 1.4 &Aring;
<li><b>show disjoint surfaces</b> - whether to calculate disconnected
blobs of surface such as inside bubbles; omitting them simplifies 
the surface and may be a good idea, unless the binding site of interest 
is completely enclosed
</ul>
These parameters can be changed with commands, for example:
<blockquote>
<i>Command</i>: <b><a href="midas/setattr.html">setattr</a> s probeRadius 1.5</b>
<br>
<i>Command</i>: <b><a href="midas/setattr.html">setattr</a> s allComponents false</b>
</blockquote>
Along with <b>vertex density</b>, these settings can also be 
specified in the <a href="midas/surface.html"><b>surface</b></a> command
or changed in a pre-existing surface by using the
<a href="msmsattrib.html">MSMS attributes panel</a> or by
<a href="selection.html#pickselect">selecting</a> the surface and using
<a href="inspection.html"><b>Selection Inspector</b></a>.
The values to use for subsequently created surfaces can be set in the
<a href="preferences.html#New Surfaces"><b>New Surfaces</b> preferences</a>.
</p><p>
Finally, the <a href="midas/vdwrad.html">Chimera default radii</a> 
differ from the <a href="midas/radii"><i>dms</i> default radii</a>.  There may
not be a reason to prefer one set over the other, but if desired, the
radii in Chimera can be changed to the <i>dms</i> default values by using
<a href="../ContributedSoftware/defineattrib/defineattrib.html"><b>Define
Attribute</b></a> to read the assignment file
<a href="dmsrad.txt" type="text/plain">dmsrad.txt</a>.
</p>

<h3>Limitation</h3>
<p>
A limitation of the <a href="#dmsfile">DMS files</a>
from <a href="#writedms"><b>Write DMS</b></a>
(not relevant to
<a href="http://dock.compbio.ucsf.edu/DOCK_6/dock6_manual.htm#Sphgen"
target="_blank"><i>sphgen</i></a> use, however)
is that all points are labeled C for contact surface, whereas S
should be used for saddle surface and R for reentrant surface.
This limitation comes from the
<a href="http://mgltools.scripps.edu/packages/MSMS"
target="_blank">MSMS package</a> that Chimera uses to calculate 
molecular surfaces, which reports all points as type 3 (contact) although 
types 1 (toric reentrant) and 2 (spheric reentrant) are also documented.
<hr>
<address>UCSF Computer Graphics Laboratory / October 2013</address>
</body></html>
